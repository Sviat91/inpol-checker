# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π –¥–µ—Ç–µ–∫—Ü–∏–∏ –∫–∞–ø—á–∏

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

–ë–æ—Ç –ø—Ä–∏—Å—ã–ª–∞–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∫–∞–ø—á–µ –∫–æ–≥–¥–∞ –µ—ë –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –Ω–µ –±—ã–ª–æ:
- ‚ùå –î–≤–∞–∂–¥—ã –ø—Ä–∏—Å–ª–∞–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- ‚ùå –ö–∞–ø—á–∞ –µ—â—ë –Ω–∏ —Ä–∞–∑—É –Ω–µ –ø–æ—è–≤–ª—è–ª–∞—Å—å
- ‚ùå –õ–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è

## üîç –ü—Ä–∏—á–∏–Ω–∞

–°—Ç–∞—Ä–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è –±—ã–ª–∞ **—Å–ª–∏—à–∫–æ–º –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–π**:

```python
# ‚ùå –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:
if 'akamai' in page_source:  # –°–ª–æ–≤–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö!
    detect()

if 'behavioral' in page_source:  # –ú–æ–∂–µ—Ç –±—ã—Ç—å –≥–¥–µ —É–≥–æ–¥–Ω–æ
    detect()
    
if div.behavioral-content:  # –ë–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–∑–º–µ—Ä–∞
    detect()
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∞ –Ω–∞ —Å–∫—Ä–∏–ø—Ç—ã, —Å—Ç–∏–ª–∏, —Å–∫—Ä—ã—Ç—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –°—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏

```python
# ‚úÖ –ù–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:
if iframe[src*='akamai']:
    if iframe.is_displayed():
        size = iframe.size
        if size['width'] > 100 and size['height'] > 100:  # –†–µ–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä!
            detect()
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏

```python
if div.overlay:
    size = div.size
    if size['width'] > 200 and size['height'] > 200:  # –ú–∏–Ω–∏–º—É–º 200x200px
        opacity = div.get_css('opacity')
        if opacity > 0.5:  # –ù–µ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π!
            detect()
```

### 3. –£–±—Ä–∞–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫—É —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

```python
# ‚ùå –£–î–ê–õ–ï–ù–û - —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ false positives:
if 'akamai' in page_source:
    detect()
    
if 'behavioral' in page_source:
    detect()
```

```python
# ‚úÖ –û–°–¢–ê–í–õ–ï–ù–û - —Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º—ã–π —Ç–µ–∫—Å—Ç –≤ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–Ω–∞—Ö:
if modal.contains('Potwierd≈∫, ≈ºe jeste≈õ cz≈Çowiekiem'):
    if modal.is_displayed():
        detect()
```

### 4. –£–º–µ–Ω—å—à–µ–Ω–∞ —á–∞—Å—Ç–æ—Ç–∞ –ø—Ä–æ–≤–µ—Ä–æ–∫

**–ë—ã–ª–æ:**
- –ö–∞–∂–¥—ã–µ 5 –¥–∞—Ç ‚Üí 30 –ø—Ä–æ–≤–µ—Ä–æ–∫ –Ω–∞ —Ü–∏–∫–ª
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –≤—ã–±–æ—Ä–∞ –æ—á–µ—Ä–µ–¥–∏ ‚Üí 3 –ø—Ä–æ–≤–µ—Ä–∫–∏
- –ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –º–µ—Å—è—Ü–µ–º ‚Üí 15 –ø—Ä–æ–≤–µ—Ä–æ–∫
- **–ò—Ç–æ–≥–æ:** ~50 –ø—Ä–æ–≤–µ—Ä–æ–∫ –∑–∞ —Ü–∏–∫–ª

**–°—Ç–∞–ª–æ:**
- –ö–∞–∂–¥—ã–µ 10 –¥–∞—Ç ‚Üí 15 –ø—Ä–æ–≤–µ—Ä–æ–∫ –Ω–∞ —Ü–∏–∫–ª
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –≤—ã–±–æ—Ä–∞ –æ—á–µ—Ä–µ–¥–∏ ‚Üí 3 –ø—Ä–æ–≤–µ—Ä–∫–∏
- –ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –º–µ—Å—è—Ü–µ–º ‚Üí 15 –ø—Ä–æ–≤–µ—Ä–æ–∫
- **–ò—Ç–æ–≥–æ:** ~35 –ø—Ä–æ–≤–µ—Ä–æ–∫ –∑–∞ —Ü–∏–∫–ª

## üìä –ù–æ–≤—ã–µ —É—Å–ª–æ–≤–∏—è –¥–µ—Ç–µ–∫—Ü–∏–∏

### –ú–µ—Ç–æ–¥ 1: Akamai iframe
```python
iframe[src*='akamai'] AND
is_displayed() AND
width > 100px AND
height > 100px
```

### –ú–µ—Ç–æ–¥ 2: Akamai overlay
```python
(
  div[id^='sec-if-cpt'] OR
  div[id^='sec-cpt'] OR
  div.behavioral-content OR
  div[class*='akamai']
) AND
is_displayed() AND
width > 200px AND
height > 200px AND
opacity > 0.5
```

### –ú–µ—Ç–æ–¥ 3: Text in modal
```python
(
  div.modal OR
  div.dialog OR
  div.popup
) AND
contains('Potwierd≈∫' OR 'cz≈Çowiekiem' OR 'robot') AND
is_displayed()
```

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### –ö–æ–≥–¥–∞ –∫–∞–ø—á–∏ –ù–ï–¢:
```
[INFO] check 20 PA≈π 2025
[INFO] check 21 PA≈π 2025
[INFO] check 22 PA≈π 2025
...
[INFO] check 30 PA≈π 2025
[DEBUG] Captcha check (day 10) - none found ‚úÖ
[INFO] check 1 LIS 2025
```

**–ù–∏–∫–∞–∫–∏—Ö –ª–æ–∂–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π!**

### –ö–æ–≥–¥–∞ –∫–∞–ø—á–∞ –ï–°–¢–¨:
```
[INFO] check 20 PA≈π 2025
[DEBUG] Captcha detected: Akamai overlay (div[id^='sec-cpt'], size: 400x300) ‚úÖ
[WARNING] CAPTCHA DETECTED (Akamai overlay...) - pausing for 2 minutes
üì± Telegram: "üö® AKAMAI CAPTCHA DETECTED! Detection: Akamai overlay..."
```

**–í —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–∏ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏—á–∏–Ω–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è!**

## üîß –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

### Detection reason –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–∏

**–°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç:**
```
üö® AKAMAI CAPTCHA DETECTED!
‚è∞ Bot paused...
```

**–ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç:**
```
üö® AKAMAI CAPTCHA DETECTED!
üìç Detection: Akamai iframe (visible and sized)
‚è∞ Bot paused...
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- `Akamai iframe (visible and sized)` - –Ω–∞—à—ë–ª iframe
- `Akamai overlay (div[id^='sec-cpt'], size: 400x300)` - overlay —Å —Ä–∞–∑–º–µ—Ä–æ–º
- `Captcha text in modal/dialog: "Potwierd≈∫..."` - —Ç–µ–∫—Å—Ç –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ

## üöÄ –ó–∞–ø—É—Å–∫ —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º

```bash
# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –∑–∞–ø—É—Å–∫–∞–π:
docker compose up

# –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ - –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å false positives:
# ‚úÖ [DEBUG] Captcha check - none found
# ‚ùå –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å: CAPTCHA DETECTED –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
```

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

**–ù–∞ –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª (3 –∞–¥—Ä–µ—Å–∞ √ó 5 –º–µ—Å—è—Ü–µ–≤):**
- ~150 –ø—Ä–æ–≤–µ—Ä–æ–∫ –¥–∞—Ç
- ~35 –ø—Ä–æ–≤–µ—Ä–æ–∫ –∫–∞–ø—á–∏ (–±—ã–ª–æ 50)
- ~0 –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π (–±—ã–ª–æ 2+)

**–í—Ä–µ–º—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω–æ–π –∫–∞–ø—á–∏:** 10-60 —Å–µ–∫—É–Ω–¥ (–±—ã–ª–æ 10-30)

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

1. **–ï—Å–ª–∏ –∫–∞–ø—á–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç–æ** - –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å AntiCaptcha
2. **–ï—Å–ª–∏ –±–æ—Ç –Ω–µ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é –∫–∞–ø—á—É** - –¥–æ–±–∞–≤—å LOG_LEVEL=DEBUG
3. **Detection reason** –ø–æ–º–æ–∂–µ—Ç –ø–æ–Ω—è—Ç—å —á—Ç–æ –∏–º–µ–Ω–Ω–æ —Å—Ä–∞–±–æ—Ç–∞–ª–æ
4. **VNC –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ï—Å–ª–∏ –∫–∞–ø—á–∞ –ù–ï –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞:
```bash
# –í–∫–ª—é—á–∏ DEBUG –ª–æ–≥–∏:
LOG_LEVEL=DEBUG docker compose up

# –£–≤–∏–¥–∏—à—å:
[DEBUG] Captcha check (day 10) - none found
[DEBUG] Checking div[id^='sec-if-cpt']: no elements
[DEBUG] Checking div.behavioral-content: found 1, not visible
```

### –ï—Å–ª–∏ –ª–æ–∂–Ω–æ–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–µ:
```bash
# –£–≤–∏–¥–∏—à—å –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–∏ –ü–†–ò–ß–ò–ù–£:
üìç Detection: Akamai overlay (div.behavioral-content, size: 250x200)

# –ú–æ–∂–µ—à—å –¥–æ–±–∞–≤–∏—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è —ç—Ç–æ–≥–æ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞
```

## üìù –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `lib/checker.py` - —Å—Ç—Ä–æ–≥–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è –∫–∞–ø—á–∏
- `FIX_FALSE_CAPTCHA.md` - —ç—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

- ‚úÖ –ù–µ—Ç –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π
- ‚úÖ –†–µ–∞–ª—å–Ω–∞—è –∫–∞–ø—á–∞ –≤—Å—ë —Ä–∞–≤–Ω–æ –¥–µ—Ç–µ–∫—Ç–∏—Ç—Å—è
- ‚úÖ –£–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏—á–∏–Ω–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –ú–µ–Ω—å—à–µ –ø—Ä–æ–≤–µ—Ä–æ–∫ = –±—ã—Å—Ç—Ä–µ–µ —Ä–∞–±–æ—Ç–∞
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤

–¢–µ–ø–µ—Ä—å –±–æ—Ç –¥–æ–ª–∂–µ–Ω –ø—Ä–∏—Å—ã–ª–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ **—Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –∫–∞–ø—á–∞ —Ä–µ–∞–ª—å–Ω–æ –µ—Å—Ç—å!** üéØ
