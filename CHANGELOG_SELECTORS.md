# Changelog - Selector Updates & Akamai Protection

## üéØ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç 17.10.2025 (LATEST)

### ‚úÖ 1. –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω—ã–π —Å–µ–ª–µ–∫—Ç–æ—Ä –∫–Ω–æ–ø–∫–∏ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è

#### –ü—Ä–æ–±–ª–µ–º–∞
–°—Ç–∞—Ä—ã–π —Å–µ–ª–µ–∫—Ç–æ—Ä –∑–∞–≤–∏—Å–µ–ª –æ—Ç –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –∫–Ω–æ–ø–∫–∏, –Ω–µ —Ä–∞–±–æ—Ç–∞–ª —Å –¥—Ä—É–≥–∏–º–∏ —è–∑—ã–∫–∞–º–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.

#### –†–µ—à–µ–Ω–∏–µ
```python
# –ù–æ–≤—ã–π –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω—ã–π XPath —Å translate() –¥–ª—è case-insensitive –ø–æ–∏—Å–∫–∞:
x_appointment_button = '''//h3[
    contains(translate(text(), "ABCDEFGHIJKLMNOPQRSTUVWXYZ", "abcdefghijklmnopqrstuvwxyz"), "appointment") or 
    contains(translate(text(), "ABCDEFGHIJKLMNOPQRSTUVWXYZ", "abcdefghijklmnopqrstuvwxyz"), "wizyt") or 
    contains(translate(text(), "–ê–ë–í–ì–î–ï–Å–ñ–ó–ò–ô–ö–õ–ú–ù–û–ü–†–°–¢–£–§–•–¶–ß–®–©–™–´–¨–≠–Æ–Ø", "–∞–±–≤–≥–¥–µ—ë–∂–∑–∏–π–∫–ª–º–Ω–æ–ø—Ä—Å—Ç—É—Ñ—Ö—Ü—á—à—â—ä—ã—å—ç—é—è"), "–∑—É—Å—Ç—Ä—ñ—á") or 
    contains(translate(text(), "–ê–ë–í–ì–î–ï–Å–ñ–ó–ò–ô–ö–õ–ú–ù–û–ü–†–°–¢–£–§–•–¶–ß–®–©–™–´–¨–≠–Æ–Ø", "–∞–±–≤–≥–¥–µ—ë–∂–∑–∏–π–∫–ª–º–Ω–æ–ø—Ä—Å—Ç—É—Ñ—Ö—Ü—á—à—â—ä—ã—å—ç—é—è"), "–≤—Å—Ç—Ä–µ—á—É")
]/following::button[contains(@class, "btn--accordion")][1]'''
```

#### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏
- üá¨üáß **English**: "Make an appointment at the office"
- üáµüá± **Polski**: "Um√≥w siƒô na wizytƒô w urzƒôdzie"
- üá∫üá¶ **–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞**: "–î–æ–º–æ–≤—Ç–µ—Å—è –ø—Ä–æ –∑—É—Å—Ç—Ä—ñ—á –≤ –æ—Ñ—ñ—Å—ñ"
- üá∑üá∫ **–†—É—Å—Å–∫–∏–π**: "–ù–∞–∑–Ω–∞—á–∏—Ç—å –≤—Å—Ç—Ä–µ—á—É –≤ –æ—Ñ–∏—Å–µ"

#### –ì–¥–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ
- ‚úÖ `expand_appointment_panel()` - –æ—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è
- ‚úÖ `check_one_location()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–¥–Ω–æ–π –ª–æ–∫–∞—Ü–∏–∏

### ‚úÖ 2. –û–±–Ω–æ–≤–ª–µ–Ω—ã —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –∫–∞–ª–µ–Ω–¥–∞—Ä—è Material Design

#### –ö–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ –¥–∞—Ç—ã
```python
# –ë—ã–ª–æ (—Ä–∞–±–æ—Ç–∞–ª–æ, –Ω–æ –Ω–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ):
'//mat-calendar[...]/td[@role="gridcell" and not(contains(@class,"disabled"))]'

# –°—Ç–∞–ª–æ (—Ç–æ—á–Ω–µ–µ, –∫–ª–∏–∫–∞–µ–º –∏–º–µ–Ω–Ω–æ –∫–æ–Ω—Ç–µ–Ω—Ç —è—á–µ–π–∫–∏):
'//mat-calendar[...]/td[@role="gridcell" and not(contains(@class,"disabled"))]//div[contains(@class,"mat-calendar-body-cell-content")]'
```

#### –ú–µ—Å—è—Ü/–≥–æ–¥
```python
# –ë—ã–ª–æ (–ª–∏—à–Ω–∏–π /span):
'//button[contains(@class,"mat-calendar-period-button")]/span/span'

# –°—Ç–∞–ª–æ (–ø—Ä–æ—â–µ –∏ –Ω–∞–¥–µ–∂–Ω–µ–µ):
'//button[contains(@class,"mat-calendar-period-button")]/span'
```

#### –ö–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
```python
# –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –º–µ—Å—è—Ü–∞:
x_prev_month = '//button[contains(@class,"mat-calendar-previous-button")]'
x_next_month = '//button[contains(@class,"mat-calendar-next-button")]'  # –±—ã–ª–æ –∏ —Ä–∞–Ω—å—à–µ
```

### ‚úÖ 3. –£–ª—É—á—à–µ–Ω–Ω–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤

#### –î–≤—É—Ö—ç—Ç–∞–ø–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
```python
# –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
x_reservations_hours = '//div[@class="reservation__hours"]//div[@class="tiles tiles--hours"]//div[@class="row"]'

# –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Å–∞–º–∏—Ö —Å–ª–æ—Ç–æ–≤
x_time_slots = '//div[@class="reservation__hours"]//div[@class="tiles tiles--hours"]//div[@class="row"]//*[contains(@class,"tile")]'
```

#### –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏
```python
slots_container = browser.find_elements(By.XPATH, x_reservations_hours)
if len(slots_container) != 0:
    time_slots = browser.find_elements(By.XPATH, x_time_slots)
    if len(time_slots) > 0:
        # üéØ SLOT FOUND! –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        msg = f'üéØ SLOT FOUND! {date} ({len(time_slots)} slots available)'
    else:
        # –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –µ—Å—Ç—å, –Ω–æ —Å–ª–æ—Ç–æ–≤ –Ω–µ—Ç (—Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è)
        logging.debug(f'Container found but no time slots for {date}')
```

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- ‚úÖ –ú–µ–Ω—å—à–µ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π
- ‚úÖ –¢–æ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤
- ‚úÖ –õ—É—á—à–∏–µ DEBUG –ª–æ–≥–∏

### ‚úÖ 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–ø—á–∏ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –º–µ—Å—è—Ü–µ–º

```python
while True:
    # ‚Üê –î–û–ë–ê–í–õ–ï–ù–û: –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –º–µ—Å—è—Ü–µ–º
    self.detect_captcha()
    
    month_year_text = ...
    enabled_cells = ...
    # ...
```

#### –ó–∞—á–µ–º
- Akamai –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å –∫–∞–ø—á—É –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç
- –†–∞–Ω–Ω—è—è –¥–µ—Ç–µ–∫—Ü–∏—è = –º–µ–Ω—å—à–µ –ø–æ—Ç–µ—Ä—è–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø–æ—è–≤–ª–µ–Ω–∏—è

### ‚úÖ 5. –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ —á–µ–ª–æ–≤–µ–∫–æ–ø–æ–¥–æ–±–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏

#### –û–±–Ω–æ–≤–ª–µ–Ω–æ –≤–µ–∑–¥–µ –Ω–∞ `rand.uniform(2, 5)`
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
- ‚úÖ –†–∞—Å–∫—Ä—ã—Ç–∏–µ –ø–∞–Ω–µ–ª–∏
- ‚úÖ –û—Ç–∫—Ä—ã—Ç–∏–µ dropdown
- ‚úÖ –í—ã–±–æ—Ä –æ–ø—Ü–∏–π
- ‚úÖ –ö–ª–∏–∫–∏ –ø–æ –¥–∞—Ç–∞–º
- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –º–µ—Å—è—Ü–∞–º

#### –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏
```python
# –ü–æ—Å–ª–µ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è –ø–∞–Ω–µ–ª–∏ (–∂–¥–µ–º –∞–Ω–∏–º–∞—Ü–∏—é):
time.sleep(rand.uniform(2, 3))

# –ü–µ—Ä–µ–¥ –∫–ª–∏–∫–æ–º –ø–æ –∫–Ω–æ–ø–∫–µ (–∏–º–∏—Ç–∞—Ü–∏—è "–¥—É–º–∞–Ω–∏—è"):
time.sleep(rand.uniform(1, 2))

# –°–∫—Ä–æ–ª–ª + –Ω–µ–±–æ–ª—å—à–∞—è –ø–∞—É–∑–∞:
element.location_once_scrolled_into_view
time.sleep(rand.uniform(0.5, 1.0))
```

### ‚úÖ 6. JavaScript –∫–ª–∏–∫–∏ –¥–ª—è accordion –∫–Ω–æ–ø–æ–∫

```python
# –í–º–µ—Å—Ç–æ –æ–±—ã—á–Ω–æ–≥–æ –∫–ª–∏–∫–∞:
button_el.click()

# –ò—Å–ø–æ–ª—å–∑—É–µ–º JavaScript (–Ω–∞–¥–µ–∂–Ω–µ–µ –¥–ª—è accordion):
self.config.browser.execute_script("arguments[0].click();", button_el)
```

#### –ü—Ä–∏—á–∏–Ω–∞
- Accordion –∫–Ω–æ–ø–∫–∏ –∏–Ω–æ–≥–¥–∞ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—Ç—Å—è –¥—Ä—É–≥–∏–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏
- JavaScript –∫–ª–∏–∫ –æ–±—Ö–æ–¥–∏—Ç —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É
- –ë–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞

### ‚úÖ 7. –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è SETUP_REQUIREMENTS.md

–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –≤–∫–ª—é—á–∞–µ—Ç:
- ‚úÖ –°–ø–∏—Å–æ–∫ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ Docker setup –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- ‚úÖ VNC –¥–æ—Å—Ç—É–ø –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è –∫–∞–ø—á–∏
- ‚úÖ Systemd service –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
- ‚úÖ Troubleshooting —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤ —Ä–∞–±–æ—Ç—ã
- ‚úÖ –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤

### –ö–Ω–æ–ø–∫–∞ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è

| –í–µ—Ä—Å–∏—è | –°–µ–ª–µ–∫—Ç–æ—Ä | –Ø–∑—ã–∫–∏ | –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å |
|--------|----------|-------|------------|
| **16.10.2025** | `//button[.//h3[contains(text(),"Cases.MakeAppointmentAtOffice")]]` | 1 (token) | ‚ö†Ô∏è –°—Ä–µ–¥–Ω—è—è |
| **17.10.2025** | Multi-language XPath —á–µ—Ä–µ–∑ translate() | 4 (EN/PL/UA/RU) | ‚úÖ –í—ã—Å–æ–∫–∞—è |

### –ö–∞–ª–µ–Ω–¥–∞—Ä—å

| –≠–ª–µ–º–µ–Ω—Ç | –°—Ç–∞—Ä—ã–π | –ù–æ–≤—ã–π | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|--------|-------|-----------|
| **–î–∞—Ç—ã** | `td[@role="gridcell"]` | `td[@role="gridcell"]//div[...mat-calendar-body-cell-content]` | –ö–ª–∏–∫–∞–µ–º –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ |
| **–ú–µ—Å—è—Ü/–≥–æ–¥** | `button[...]/span/span` | `button[...]/span` | –ü—Ä–æ—â–µ, –Ω–∞–¥–µ–∂–Ω–µ–µ |
| **–°–ª–æ—Ç—ã** | –û–¥–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ | –î–≤–æ–π–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä + —Å–ª–æ—Ç—ã) | –ú–µ–Ω—å—à–µ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π |

## üéØ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç 16.10.2025

### ‚úÖ 1. –û–±–Ω–æ–≤–ª–µ–Ω—ã —Å–µ–ª–µ–∫—Ç–æ—Ä—ã (–∏–∑ selectors.md)

#### –ö–Ω–æ–ø–∫–∞ –∑–∞–ø–∏—Å–∏
```python
# –°—Ç–∞—Ä—ã–π (–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç):
'//div/h3[contains(text(),"Make an appointment at the office")]/following-sibling::button'

# –ù–æ–≤—ã–π (–∞–∫—Ç—É–∞–ª—å–Ω—ã–π):
'//button[.//h3[contains(text(),"Cases.MakeAppointmentAtOffice")]]'
```

#### Dropdown –ª–æ–∫–∞—Ü–∏–π –∏ –æ—á–µ—Ä–µ–¥–µ–π
- `//mat-select[@name="location"]` - ‚úÖ —Ä–∞–±–æ—Ç–∞–µ—Ç
- `//mat-select[@name="queueName"]` - ‚úÖ —Ä–∞–±–æ—Ç–∞–µ—Ç
- `//mat-option/span[@class="mat-option-text"]` - ‚úÖ —Ä–∞–±–æ—Ç–∞–µ—Ç

#### –ö–∞–ª–µ–Ω–¥–∞—Ä—å
- Enabled cells: `//mat-calendar[contains(@class,"reservation-calander")]/div/mat-month-view/table/tbody/tr/td[@role="gridcell" and not(contains(@class,"disabled"))]` - ‚úÖ —Ä–∞–±–æ—Ç–∞–µ—Ç
- Next month: `//button[contains(@class,"mat-calendar-next-button")]` - ‚úÖ —Ä–∞–±–æ—Ç–∞–µ—Ç
- Month/Year: `//button[contains(@class,"mat-calendar-period-button")]/span/span` - ‚úÖ —Ä–∞–±–æ—Ç–∞–µ—Ç

### ‚úÖ 2. –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ Akamai –∫–∞–ø—á–∏

#### –ù–æ–≤—ã–π –º–µ—Ç–æ–¥ `detect_captcha()`
```python
def detect_captcha(self):
    """Detect Akamai captcha and wait for manual solving."""
    try:
        captcha_iframes = self.config.browser.find_elements(
            By.CSS_SELECTOR, "iframe[src*='akamai']"
        )
        if captcha_iframes:
            msg = '‚ö†Ô∏è AKAMAI CAPTCHA DETECTED! Please solve manually in VNC within 2 minutes'
            logging.warning(msg)
            self.config.messenger.send_message(msg)
            time.sleep(120)  # Wait 2 minutes
            return True
    except Exception as e:
        logging.debug(f'Captcha detection error: {e}')
    return False
```

#### –ì–¥–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
- ‚úÖ `open_case_page()` - –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–µ–π—Å–∞
- ‚úÖ `check_one_location()` - –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–æ–∫–∞—Ü–∏–∏

### ‚úÖ 3. –£–≤–µ–ª–∏—á–µ–Ω—ã –∑–∞–¥–µ—Ä–∂–∫–∏ (2-5 —Å–µ–∫—É–Ω–¥)

#### –ë—ã–ª–æ
```python
time.sleep(1)
self.random_sleep()  # 0.3-0.9 —Å–µ–∫—É–Ω–¥
```

#### –°—Ç–∞–ª–æ
```python
time.sleep(rand.uniform(2, 5))  # 2-5 —Å–µ–∫—É–Ω–¥ —Å–ª—É—á–∞–π–Ω–æ
```

#### –ì–¥–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
- ‚úÖ –û—Ç–∫—Ä—ã—Ç–∏–µ dropdown –º–µ–Ω—é
- ‚úÖ –í—ã–±–æ—Ä –ª–æ–∫–∞—Ü–∏–π
- ‚úÖ –í—ã–±–æ—Ä –æ—á–µ—Ä–µ–¥–µ–π
- ‚úÖ –ö–ª–∏–∫–∏ –ø–æ –¥–∞—Ç–∞–º –∫–∞–ª–µ–Ω–¥–∞—Ä—è
- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ—Å—è—Ü–µ–≤

### ‚úÖ 4. Human-like –ø–æ–≤–µ–¥–µ–Ω–∏–µ

#### –ó–∞–º–µ–Ω–∞ –æ–±—ã—á–Ω—ã—Ö –∫–ª–∏–∫–æ–≤
```python
# –ë—ã–ª–æ:
element.click()

# –°—Ç–∞–ª–æ:
self.human.human_click(element)
```

#### –ì–¥–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "Um√≥w wizytƒô"
- ‚úÖ Dropdown –ª–æ–∫–∞—Ü–∏–π
- ‚úÖ –í—ã–±–æ—Ä –ª–æ–∫–∞—Ü–∏–∏
- ‚úÖ Dropdown –æ—á–µ—Ä–µ–¥–µ–π
- ‚úÖ –í—ã–±–æ—Ä –æ—á–µ—Ä–µ–¥–∏
- ‚úÖ –ö–ª–∏–∫–∏ –ø–æ –¥–∞—Ç–∞–º
- ‚úÖ –ö–Ω–æ–ø–∫–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ –º–µ—Å—è—Ü–∞

### ‚úÖ 5. –¢–∞–π–º–∑–æ–Ω–∞ Europe/Warsaw

#### docker-compose.yml
```yaml
environment:
  - "TZ=Europe/Warsaw"  # ‚Üê –î–û–ë–ê–í–õ–ï–ù–û
  - "CHROMEDRIVER_PATH=/usr/bin/chromedriver"
  - "CHROME_BINARY=/usr/bin/chromium"
```

#### –≠—Ñ—Ñ–µ–∫—Ç
- –°–∏—Å—Ç–µ–º–Ω–æ–µ –≤—Ä–µ–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ = Warsaw time
- –õ–æ–≥–∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º
- –°–æ–≤–ø–∞–¥–∞–µ—Ç —Å browser_factory.py (Emulation.setTimezoneOverride)

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è

### –î–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```
Action                  Delay       Click Type
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Load page              1s          -
Open dropdown          0.3-0.9s    element.click()
Select option          0.3-0.9s    element.click()
Click date             0.3-0.9s    element.click()
Next month             0.3-0.9s    element.click()

Total per date: ~2-4 seconds
Detection risk: HIGH ‚ö†Ô∏è
```

### –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```
Action                  Delay       Click Type
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Load page              2-5s        -
Captcha check          0-120s      -
Open dropdown          2-5s        human_click()
Select option          2-5s        human_click()
Click date             2-5s        human_click()
Next month             2-5s        human_click()

Total per date: ~8-20 seconds
Detection risk: LOW ‚úÖ
```

## üîß –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **lib/checker.py**
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `detect_captcha()`
   - ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã
   - ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω—ã –∑–∞–¥–µ—Ä–∂–∫–∏ –¥–æ 2-5 —Å–µ–∫—É–Ω–¥
   - ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã –∫–ª–∏–∫–∏ –Ω–∞ `human_click()`
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞–ø—á–∏

2. **docker-compose.yml**
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ `TZ=Europe/Warsaw`

3. **–ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π** (–∫–∞–∫ —Ç—Ä–µ–±–æ–≤–∞–ª–æ—Å—å)
   - ‚úÖ –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞
   - ‚úÖ –ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∞—Ç
   - ‚úÖ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
   - ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

## üöÄ –ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

```bash
# 1. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker compose down
docker compose build

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å
docker compose up -d

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker compose logs -f

# 4. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ VNC (–µ—Å–ª–∏ –∫–∞–ø—á–∞)
# localhost:5900 (password: password)
```

## üìù –õ–æ–≥–∏

### –£—Å–ø–µ—à–Ω–∞—è —Ä–∞–±–æ—Ç–∞
```
INFO - expand appointment panel
INFO - expand list of locations
INFO - location selection (ul. Marsza≈Çkowska 3/5, 00-624 Warszawa)
INFO - open list of queues
INFO - queue selection (X - applications for TEMPORARY STAY)
INFO - 15 enabled cells in GRUDZIE≈É 2024
INFO - check 17 GRUDZIE≈É 2024
```

### –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –∫–∞–ø—á–∞
```
WARNING - ‚ö†Ô∏è AKAMAI CAPTCHA DETECTED! Please solve manually in VNC within 2 minutes
[Telegram notification sent]
[Waiting 120 seconds...]
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ö–∞–ø—á–∞** - –µ—Å–ª–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è, —É –≤–∞—Å –µ—Å—Ç—å 2 –º–∏–Ω—É—Ç—ã —á—Ç–æ–±—ã —Ä–µ—à–∏—Ç—å —á–µ—Ä–µ–∑ VNC
2. **–ó–∞–¥–µ—Ä–∂–∫–∏** - –±–æ—Ç —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–µ–µ (8-20 —Å–µ–∫ –Ω–∞ –¥–∞—Ç—É), –Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ
3. **–°–µ–ª–µ–∫—Ç–æ—Ä—ã** - –µ—Å–ª–∏ —Å–∞–π—Ç —Å–Ω–æ–≤–∞ –∏–∑–º–µ–Ω–∏—Ç—Å—è, –æ–±–Ω–æ–≤–∏—Ç–µ `selectors.md` –∏ `checker.py`
4. **–õ–æ–≥–∏–∫–∞** - –∞–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–æ–≤–µ—Ä–∫–∏ –ù–ï –∏–∑–º–µ–Ω–µ–Ω, —Ç–æ–ª—å–∫–æ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –∏ –∑–∞–¥–µ—Ä–∂–∫–∏

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —Å–∞–π—Ç–µ
2. ‚è≥ –°–æ–±—Ä–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∫–∞–ø—á–∏
3. ‚è≥ –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∏
4. ‚è≥ –û–±–Ω–æ–≤–∏—Ç—å —Å–µ–ª–µ–∫—Ç–æ—Ä—ã —Å–ª–æ—Ç–æ–≤ –≤—Ä–µ–º–µ–Ω–∏ (–∫–æ–≥–¥–∞ –ø–æ—è–≤—è—Ç—Å—è)
